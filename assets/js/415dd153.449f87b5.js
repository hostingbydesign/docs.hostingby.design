"use strict";(self.webpackChunkseedboxio=self.webpackChunkseedboxio||[]).push([[5270],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return f}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=l(t),m=o,f=u["".concat(c,".").concat(m)]||u[m]||p[m]||i;return t?r.createElement(f,a(a({ref:n},d),{},{components:t})):r.createElement(f,a({ref:n},d))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=m;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[u]="string"==typeof e?e:o,a[1]=s;for(var l=2;l<i;l++)a[l]=t[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8868:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return a},default:function(){return u},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return l}});var r=t(3117),o=(t(7294),t(3905));const i={id:"rclone-mergerfs",title:"Rclone and Mergerfs mount",sidebar:"Rclone and Mergerfs mount"},a=void 0,s={unversionedId:"application-hosting/guides/rclone-mergerfs",id:"application-hosting/guides/rclone-mergerfs",title:"Rclone and Mergerfs mount",description:"For users asking for a way to add Dropbox via systemd --user and MergerFS here is a howto.",source:"@site/docs/application-hosting/guides/rclone-and-mergerfs.mdx",sourceDirName:"application-hosting/guides",slug:"/application-hosting/guides/rclone-mergerfs",permalink:"/application-hosting/guides/rclone-mergerfs",draft:!1,editUrl:"https://github.com/hostingbydesign/docs.hostingby.design/tree/master/docs/application-hosting/guides/rclone-and-mergerfs.mdx",tags:[],version:"current",frontMatter:{id:"rclone-mergerfs",title:"Rclone and Mergerfs mount",sidebar:"Rclone and Mergerfs mount"},sidebar:"docs",previous:{title:"Data Migration Between Slots",permalink:"/application-hosting/guides/migration"},next:{title:"How do I connect to the server?",permalink:"/dedicated-servers/getting-started/how-do-i-connect"}},c={},l=[],d={toc:l};function u(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"Please Note This guide is written by a community member, support for this will solely be via our discord community",type:"tip"}),(0,o.kt)("p",null,"For users asking for a way to add Dropbox via ",(0,o.kt)("inlineCode",{parentName:"p"},"systemd --user")," and MergerFS here is a howto."),(0,o.kt)("p",null,"First you need to have a ",(0,o.kt)("inlineCode",{parentName:"p"},"dropbox.service")," file. You can use this one that is up to date with Dropbox"),(0,o.kt)("p",null,"The below ",(0,o.kt)("inlineCode",{parentName:"p"},"service")," file needs to be placed here : ",(0,o.kt)("inlineCode",{parentName:"p"},"/home/USER/.config/systemd/user")," "),(0,o.kt)("p",null,"Read more on how to start a systemd service here : ",(0,o.kt)("a",{parentName:"p",href:"https://docs.hostingby.design/application-hosting/guides/systemd"},"https://docs.hostingby.design/application-hosting/guides/systemd")),(0,o.kt)("p",null,"Remember to change stuff to your needs.\nLike :\n",(0,o.kt)("inlineCode",{parentName:"p"},"Environment"),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"ExecStart"),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"--cache-dir"),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"ExecStop"),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"ExecStartPre")," <-- Not at 'must have'"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"[Unit]\nDescription=RClone VFS Service\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=notify\nEnvironment=RCLONE_CONFIG=/home/USER/.config/rclone/rclone.conf\nKillMode=none\nRestartSec=5\nExecStart=/usr/bin/rclone mount dropbox-crypt:drive1/ /home/USER/media/shared-drives/drive-01 \\\n# This is for allowing users other than the user running rclone access to the mount\n--allow-other \\\n# Log level Use: DEBUG\n--log-level INFO \\\n# log file\n--log-file /home/USER/.config/rclone/rclone-dropbox-shared-data-01.log \\\n# This is setting the file permission on the mount to user and group have the same access and other can read\n--umask 002 \\\n# User\n--uid 1378 \\\n--gid 1378 \\\n# The local disk used for caching\n--cache-dir=/home/USER/.cache/dropbox-01 \\\n# This is used for caching files to local disk for streaming OLD - full\n--vfs-cache-mode writes \\\n# TPS LIMIT\n--tpslimit 10 \\\n--bwlimit 80M:80M \\\n# VFS\n--vfs-refresh\n#MOUNTS\nExecStop=/bin/fusermount3 -uz /home/USER/media/shared-drives/drive-01\nExecStartPre=/bin/sleep 5\nRestart=on-failure\n\n[Install]\nWantedBy=default.target\n")),(0,o.kt)("p",null,"Next you need a ",(0,o.kt)("inlineCode",{parentName:"p"},"MergerFS")," service file:\nThe below ",(0,o.kt)("inlineCode",{parentName:"p"},"service")," file needs to be placed here : ",(0,o.kt)("inlineCode",{parentName:"p"},"/home/USER/.config/systemd/user")," "),(0,o.kt)("p",null,"Remember to change stuff to your needs."),(0,o.kt)("p",null,"You can use this : "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"[Unit]\nDescription = MergerFS Mount\nAfter=rclone.service\nRequiresMountsFor=/home/USER/media/shared-drives/drive-01\n\n[Service]\nType=forking\n\nExecStart=/usr/bin/mergerfs /home/USER/media/local:/home/USER/media/shared-drives/drive-01:/home/USER/media/shared-drives/drive-02:/home/USER/media/shared-drives/drive-03:/home/USER/media/shared-drives/drive-04: /home/USER/media/merged -o rw,use_ino,allow_other,func.getattr=newest,category.action=all,category.create=ff,cache.files=auto-full\nExecStop=/bin/fusermount3 -uz /home/USER/media/merged\nRestart=on-failure\n\n[Install]\nWantedBy=default.target\n")))}u.isMDXComponent=!0}}]);